\newsavebox{\mathfontsone}
\newsavebox{\mathfontstwo}
\newsavebox{\mathfontsthree}
\newsavebox{\mathfontsfour}

\begin{lrbox}{\mathfontsone}
  \begin{lstlisting}
    \usepackage{amsmath}   % unverzichtbare Mathe-Befehle
    \usepackage{amssymb}   % viele Mathe-Symbole
    \usepackage{mathtools} % Erweiterungen für amsmath
  \end{lstlisting}
\end{lrbox}

\begin{lrbox}{\mathfontstwo}
  \begin{lstlisting}
    \usepackage{amsmath}   % unverzichtbare Mathe-Befehle
    \usepackage{amssymb}   % viele Mathe-Symbole
    \usepackage{mathtools} % Erweiterungen für amsmath

    \usepackage{fontspec} % nach amssymb

    \usepackage[





    ]{unicode-math}      % "Does exactly what it says on the tin."
  \end{lstlisting}
\end{lrbox}

\begin{lrbox}{\mathfontsthree}
  \begin{lstlisting}
    \usepackage{amsmath}   % unverzichtbare Mathe-Befehle
    \usepackage{amssymb}   % viele Mathe-Symbole
    \usepackage{mathtools} % Erweiterungen für amsmath

    \usepackage{fontspec} % nach amssymb

    \usepackage[
      math-style=ISO,    % \
      bold-style=ISO,    % |
      sans-style=italic, % | ISO-Standard folgen
      nabla=upright,     % |
      partial=upright,   % /
    ]{unicode-math}      % "Does exactly what it says on the tin."
  \end{lstlisting}
\end{lrbox}

\begin{lrbox}{\mathfontsfour}
  \begin{lstlisting}
    \usepackage{amsmath}   % unverzichtbare Mathe-Befehle
    \usepackage{amssymb}   % viele Mathe-Symbole
    \usepackage{mathtools} % Erweiterungen für amsmath

    \usepackage{fontspec} % nach amssymb

    \usepackage[
      math-style=ISO,    % \
      bold-style=ISO,    % |
      sans-style=italic, % | ISO-Standard folgen
      nabla=upright,     % |
      partial=upright,   % /
    ]{unicode-math}      % "Does exactly what it says on the tin."

    \setmathfont{Latin Modern Math}
    % \setmathfont{Tex Gyre Pagella Math} % alternativ
  \end{lstlisting}
\end{lrbox}

\begin{frame}[fragile,t]{
  Benötigte Pakete
  \hfill\doc{http://mirrors.ctan.org/macros/latex/required/amslatex/math/amsldoc.pdf}{amsmath}
  \doc{http://mirrors.ctan.org/macros/latex/contrib/mathtools/mathtools.pdf}{mathtools}
}
  \hfill\doc{http://mirrors.ctan.org/macros/latex/contrib/unicode-math/unicode-math.pdf}{unicode-math}

  \vspace{5pt}
  \only<1>{\usebox{\mathfontsone}}
  \only<2>{\usebox{\mathfontstwo}}
  \only<3>{\usebox{\mathfontsthree}}
  \only<4>{\usebox{\mathfontsfour}}
\end{frame}

\begin{frame}[fragile]{\lstinline+\$...\$+-Umgebung}
  Aktiviert den Mathematikmodus im Fließtext.

  \begin{CodeExample}{0.57}
    \begin{lstlisting}
      Dies ist eine Variable: $x$.
      Liste von Variablen $x$, $y$, $z$.
      Kleine Formel: $a^2 + b^2 = c^2$.
      Vorsicht Höhe: $x^{2^{2^{2^2}}}$
          $x_{2_{2_{2_2}}}$
      Mehr Text. Mehr Text. Mehr
      $x$-Achse, $x$-$y$-Ebene
    \end{lstlisting}
  \CodeResult
    Dies ist eine Variable: $x$. \\
    Liste von Variablen $x$, $y$, $z$. \\
    kleine Formel: $a^2 + b^2 = c^2$.\strut \\\nointerlineskip
    \begin{minipage}[t][2\baselineskip][t]{\textwidth}
      Vorsicht Höhe: $x^{2^{2^{2^2}}}$ $x_{2_{2_{2_2}}}$
    \end{minipage} \\\nointerlineskip
    \strut Mehr Text. Mehr Text. Mehr \\
    $x$-Achse, $x$-$y$-Ebene
  \end{CodeExample}

  \vspace{1em}
  \begin{itemize}
    \item Leerzeichen werden im Mathe-Modus ignoriert.
    \item \TeX\ hat Algorithmen für das richtige Spacing.
    \item Satzzeichen gehören nicht in die \lstinline+$...$+-Umgebung!
  \end{itemize}
\end{frame}

\begin{frame}[fragile]{Griechisch und mehr}
  \begin{CodeExample}{0.72}
    \begin{lstlisting}
      \epsilon \theta \kappa \pi \rho \sigma \phi
      \varepsilon \vartheta \varkappa \varpi \varrho \varsigma \varphi
      \Alpha \Beta \Gamma
      \hbar \imath \jmath \ell \wp
      \aleph \beth \gimel
      \partial \eth \nabla \square \increment \infty \diameter \ldots \cdots
    \end{lstlisting}
  \CodeResult
    \Umathordordspacing\textstyle=4mu
    $\epsilon \theta \kappa \pi \rho \sigma \phi$ \\
    $\varepsilon \vartheta \varkappa \varpi \varrho \varsigma \varphi$ \\[\baselineskip]
    $\Alpha \Beta \Gamma$ \\
    $\hbar \imath \jmath \ell \wp$ \\
    $\aleph \beth \gimel$ \\
    $\partial \eth \nabla \square \increment$ \\
    $\quad \infty \diameter \ldots \cdots$
  \end{CodeExample}
\end{frame}

\begin{frame}[fragile]{Operatoren und Relationen}
  \vspace{-1em}
  \begin{CodeExample}{0.74}
    \begin{lstlisting}
      + - / \pm \mp \cdot \times
      = \simeq \equiv \cong \approx \propto \sim
      \coloneq
      \to \iff \implies
      \mapsto \leadsto
    \end{lstlisting}
  \CodeResult
    \Umathbinbinspacing\textstyle=4mu
    \Umathrelrelspacing\textstyle=4mu
    $+ - / \pm \mp \cdot \times$ \\
    $= \simeq \equiv \cong \approx \propto \sim$ \\
    $\coloneq$ \\
    $\to \iff \implies$ \\
    $\mapsto \leadsto$
  \end{CodeExample}
  Die meisten Relationen lassen sich durch ein \texttt{n} negieren:
  \vspace{-1em}
  \begin{CodeExample}{0.74}
    \begin{lstlisting}
      \neq \nsime \nexists \nni
    \end{lstlisting}
  \CodeResult
    \Umathbinbinspacing\textstyle=4mu
    \Umathrelrelspacing\textstyle=4mu
  $\neq \nsime \nexists \nni$
  \end{CodeExample}
  Häufig möchte man etwas über eine Relation schreiben:
  \vspace{-1em}
  \begin{CodeExample}{0.74}
    \begin{lstlisting}
      \stackrel{!}{=} \stackrel{\text{def}}{=}
    \end{lstlisting}
  \CodeResult
  \vspace{2ex}
  $\smash{\stackrel{!}{=} \quad \stackrel{\text{def}}{=}}$
  \end{CodeExample}
\end{frame}

\begin{frame}[fragile]{Indizes}
  \begin{CodeExample}{0.50}
    \begin{lstlisting}
      x^2 x_2 x²
      x^10 x^{10}
      x' x^' x'' x'^2
      {}^2 x
      x_{min} x_\text{min}

      x^2^2
      x^{2^2} \cramped{x^{2^2}}
      x_\sqrt[3]{2}
      x_{\sqrt[3]{2}}
    \end{lstlisting}
  \CodeResult
    $x^2 \quad x_2 \quad x²$ \\
    $x^10 \quad x^{10}$ \\
    $x' \quad x^{'} \quad x'' \quad x'^2$ \\
    ${}^2 x$ \\
    $x_{min} \quad x_\text{min}$ \\[\baselineskip]
    \alert{Fehler}\\
    $x^{2^2} \quad \cramped{x^{2^2}}$ \\
    \alert{Fehler} \\
    $\smash{x_{\sqrt[3]{2}}}$
  \end{CodeExample}
  \begin{itemize}
    \item Man muss häufig den Index in \lstinline+{ }+ schreiben
    \item Beim mehrfachen Hochstellen jeweils \lstinline+{ }+ nötig
    \item Nur wenige Befehle können ohne \lstinline+{ }+ im Index stehen
  \end{itemize}
\end{frame}

\begin{frame}[fragile]{Akzente}
  \begin{CodeExample}{0.70}
    \begin{lstlisting}
      \bar{x}
      \hat{x}
      \tilde{x}
      \vec{x}
      \mathring{x}
      \dot{x} \ddot{x} \dddot{x} \ddddot{x}
      \underline{xy} \overline{xy}
    \end{lstlisting}
  \CodeResult
    \Umathordordspacing\textstyle=4mu
    $\bar{x}$ \\
    $\hat{x}$ \\
    $\tilde{x}$ \\
    $\vec{x}$ \\
    $\mathring{x}$ \\
    $\dot{x} \ddot{x} \dddot{x} \ddddot{x}$ \\
    $\smash{\underline{xy} \overline{xy}}$
  \end{CodeExample}
  Aufpassen, wo der Akzent hinkommt:
  \begin{CodeExample}{0.7}
    \begin{lstlisting}
      \hat{x_\text{min}} \hat{x}_\text{min}
    \end{lstlisting}
  \CodeResult
    \Umathordordspacing\textstyle=4mu
    $\hat{x_\text{min}} \hat{x}_\text{min}$
  \end{CodeExample}
\end{frame}

\begin{frame}[fragile]{Funktionen}
  \begin{CodeExample}{0.70}
    \begin{lstlisting}
      x \sin y
      x \sin(y)
      \cos \tan \exp \ln
      \lim_{x \to \infty} x^2 
      \lim_{\mathclap{x \to \infty}} x^2
    \end{lstlisting}
  \CodeResult
    $x \sin y$ \\
    $x \sin(y)$ \\
    $\cos \tan \exp \ln$ \\
    \begin{minipage}[c][2\baselineskip][c]{\textwidth}
      $\displaystyle \lim_{x \to \infty} x^2$
      \quad
      $\displaystyle \lim_{\mathclap{x \to \infty}} x^2$
    \end{minipage}
  \end{CodeExample}
  \vspace{5pt}
  Man kann auch eigene Funktionen definieren:
  \vspace{-1em}
  \begin{CodeExample}{0.70}
    \begin{lstlisting}
      \operatorname{xyz}_i(a)
      \operatorname*{xyz}_i(a)

      % in Präambel
      \DeclareMathOperator{\xyz}{xyz} \xyz_i(a)
      \DeclareMathOperator*{\Xyz}{Xyz} \Xyz_i(a)
    \end{lstlisting}
  \CodeResult
    $\operatorname{xyz}_i(a)$ \\
    $\smash{\displaystyle \operatorname*{xyz}_i(a)}$ \\
    \ \\
    \ \strut\\\nointerlineskip
    \begin{minipage}[c][2\baselineskip][c]{\textwidth}
      $\operatorname{xyz}_i(a)$
      \quad
      $\smash{\displaystyle \operatorname*{Xyz}_i(a)}$
    \end{minipage}
  \end{CodeExample}
\end{frame}

\begin{frame}[fragile]{Große Operatoren}
  \begin{CodeExample}{0.70}
    \begin{lstlisting}[lineskip=1pt]
      \sum_{i=0}^\infty x_i

      \prod \bigotimes

      \int_0^1 \iiint \oint


      \sum\nolimits_0^1 \int\limits_0^1


      \sideset{_a^b}{_c^d}\sum_{i=0}^n

      \sum_{i=1+2+3+4+5+6} x_i

      \sum_{\mathclap{i=1+2+3+4+5+6}} x_i

    \end{lstlisting}
  \CodeResult
    \begin{minipage}[c][2\baselineskip + 2pt][c]{0.9\textwidth}
      $\displaystyle \sum_{i=0}^\infty x_i$
    \end{minipage} \\\nointerlineskip
    \begin{minipage}[c][2\baselineskip + 2pt][c]{\textwidth}
      $\displaystyle \prod \bigotimes$
    \end{minipage} \\\nointerlineskip
    \begin{minipage}[c][2\baselineskip + 2pt][c]{\textwidth}
      $\displaystyle \smash{\int_0^1} \iiint \oint$
    \end{minipage} \\\nointerlineskip
    \begin{minipage}[c][3\baselineskip + 3pt][c]{\textwidth}
      $\displaystyle \sum\nolimits_0^1 \int\limits_0^1$
    \end{minipage} \\\nointerlineskip
    \begin{minipage}[c][3\baselineskip + 3pt][c]{\textwidth}
      $\displaystyle \sideset{_a^b}{_c^d}\sum_{i=0}^n$
    \end{minipage} \\\nointerlineskip
    \begin{minipage}[c][2\baselineskip + 2pt][c]{\textwidth}
      $\displaystyle \sum_{i=1+2+3+4+5+6} x_i$
    \end{minipage} \\\nointerlineskip
    \begin{minipage}[c][2\baselineskip + 2pt][c]{\textwidth}
      \hspace*{0.75cm}$\displaystyle \sum_{\mathclap{i=1+2+3+4+5+6}} x_i$
    \end{minipage}
  \end{CodeExample}
\end{frame}

\begin{frame}[fragile]{
  Fonts
  \hfill\doc{http://mirrors.ctan.org/macros/latex/contrib/unicode-math/unicode-math.pdf}{unicode-math}
}
  \begin{CodeExample}{0.70}
    \begin{lstlisting}
      x \alpha \symup{x \alpha}
      \symbf{x\alpha}
      \symbfsf{x \alpha}
      \symbb{R N 1 0 x}
      \symcal{I A O} \symbfcal{I A O}
      \symfrak{A B c} \symbffrak{A B c}
    \end{lstlisting}
  \CodeResult
    \Umathordordspacing\textstyle=4mu
    $x \alpha \symup{x \alpha}$ \\
    $\symbf{x\alpha}$ \\
    $\symbfsf{x \alpha}$ \\
    $\symbb{R N 1 0 x}$ \\
    $\symcal{I A O} \symbfcal{I A O}$ \\
    $\symfrak{A B c} \symbffrak{A B c}$
  \end{CodeExample}
\end{frame}

\begin{frame}[fragile]{Spaces}
  Manchmal muss man manuell eingreifen, um das Spacing zu perfektionieren.
  \vspace{-1em}
  \begin{CodeExample}{0.48}
    \begin{lstlisting}
      % Kein Space
      \,
      \:
      \;
      \quad
      \qquad
    \end{lstlisting}
  \CodeResult
    $|\mspace{-5mu} |$ \\
    $|\mspace{-5mu} \,|$ \\
    $|\mspace{-5mu} \:|$ \\
    $|\mspace{-5mu} \;|$ \\
    $|\mspace{-5mu} \quad|$ \\
    $|\mspace{-5mu} \qquad|$
  \end{CodeExample}
  Negativer Space um zu viel Platz zu korrigieren:
  \vspace{-1em}
  \begin{CodeExample}{0.48}
    \begin{lstlisting}
      % kein Space
      \! % negativer \,
    \end{lstlisting}
  \CodeResult
    $|\mspace{-5mu} |$ \\
    $|\mspace{-5mu} \!|$
  \end{CodeExample}
  \begin{CodeExample}{0.48}
    \begin{lstlisting}
      ^2       ^{\!\! 2}

    \end{lstlisting}
  \CodeResult
    \begin{minipage}[c][2\baselineskip][c]{\textwidth}
      ${\displaystyle \left( \frac{2^2}{2} \right)^2}$
      \qquad
      ${\displaystyle \left( \frac{2^2}{2} \right)^{\!\! 2}}$
    \end{minipage}
  \end{CodeExample}
\end{frame}

\begin{frame}[fragile]{Klammern}
  \vspace{-1.5em}
  \begin{CodeExample}{0.71}
    \begin{lstlisting}
      (x) [x] \{x\} \langle x\rangle
      \lvert x\rvert \lVert x\rVert
    \end{lstlisting}
  \CodeResult
    \Umathcloseopenspacing\textstyle=4mu
    $(x) [x] \{x\} \langle x\rangle $\\
    $\lvert x\rvert \lVert x\rVert$
  \end{CodeExample}

  \begin{CodeExample}{0.71}[Häufig braucht man größere Klammern.]
    \begin{lstlisting}
      \bigl(x\bigr) \Bigl(x\Bigr) \biggl(x\biggr) \Biggl(x\Biggr)

      \bigl<x\bigr> \bigl|x\bigr| \bigl\|x\bigr\|
    \end{lstlisting}
  \CodeResult
    \begin{minipage}[c][2\baselineskip][c]{\textwidth}
      $\bigl(x\bigr) \Bigl(x\Bigr) \biggl(x\biggr) \Biggl(x\Biggr)$
    \end{minipage} \\[\baselineskip]\nointerlineskip
    $\bigl< x\bigr> \; \bigl|x\bigr| \; \bigl\|x\bigr\|$
  \end{CodeExample}
\end{frame}

\begin{frame}[fragile]{Klammern: Automatische Größe}
  \begin{itemize}
    \item Größe des Ausdrucks zwischen \lstinline+\left+ und \lstinline+\right+ bestimmt Größe der Klammern
    \item Ein \lstinline+\left+ muss in der gleichen Zeile wieder mit \lstinline+\right+ geschlossen werden
    \item \lstinline+\left.+ oder \lstinline+\right.+ falls nur eine Klammer gewünscht wird
  \end{itemize}
  \begin{CodeExample}{0.76}
    \begin{lstlisting}
      \left(\frac{1}{2} \right) \left(\frac{1}{2}\right.

      \left\{x \,\middle|\, x<\frac{1}{2} \right\}
    \end{lstlisting}
  \CodeResult
    $\left(\frac{1}{2}\right) \qquad \left(\frac{1}{2}\right.$ \\[2\baselineskip]
      $\left\{ x \, \middle| \, x < \frac{1}{2} \right\}$
  \end{CodeExample}

  \begin{CodeExample}{0.76}[Hat kein optimales Spacing:]
    \begin{lstlisting}
      \sin(x)
      \sin\left(x\right)
      \sin\!\left(x\right)
    \end{lstlisting}
  \CodeResult
    $\sin(x)$ \\
    $\sin\left(x\right)$ \\
    $\sin\!\left(x\right)$
  \end{CodeExample}
\end{frame}

\begin{frame}[fragile]{
  Symbol-Sammlung
  \hfill\doc{http://mirrors.ctan.org/info/symbols/comprehensive/symbols-a4.pdf}{symbols-a4}
  \hfill\doc{http://mirrors.ctan.org/macros/latex/contrib/unicode-math/unimath-symbols.pdf}{unimath-symbols}
}
  Praktischer Link: \\
  \url{http://detexify.kirelabs.org/classify.html} \\
  (Symbol malen und \LaTeX-Code angezeigt bekommen)
\end{frame}

\begin{frame}[fragile]{Konventionen: Variablen, Zahlen, Einheiten, Indizes}
  \begin{itemize}
    \item Variablen/Größen werden kursiv gesetzt
    \item Mathematikmodus: alles erstmal Variable
    \item Alles, was keine Variable ist: aufrecht
      \begin{itemize}
        \item Konstanten: $\symup{e}$, $\symup{i}$, $\symup{\pi}$
          \smallskip
          \begin{lstlisting}
            $\symup{e}$, $\symup{i}$, $\symup{\pi}$
          \end{lstlisting}
          \medskip
        \item Infinitesimales: $\symup{d}x$
          \smallskip
          \begin{lstlisting}
            $\symup{d}x$
          \end{lstlisting}
          \medskip
        \item Indizes wie \enquote{min} oder \enquote{max}
          \smallskip
          \begin{lstlisting}
            x_\text{min}
          \end{lstlisting}
      \end{itemize}
  \end{itemize}
\end{frame}

\begin{frame}[fragile]{Konventionen: Variablen, Zahlen, Einheiten, Indizes}
  \begin{itemize}
    \item $\symup{d}x$ wird durch kleines Leerzeichen (\verb+\,+) vom Integranden abgetrennt
    \item \verb+\,+ auch zwischen verschiedenen $\symup{d}x_i$
  \end{itemize}

  \begin{equation*}
    \int_0^1 \int_0^{\symup{\pi}} \int_0^{2 \symup{\pi}}
    r^2 \sin(\vartheta) \,
    \symup{d}\phi \, \symup{d}\vartheta \, \symup{d}r
    = \frac{4}{3} \symup{\pi}
  \end{equation*}

  \vspace{1em}
  \begin{lstlisting}
    \int_0^1   \int_0^{\symup{\pi}}   \int_0^{2 \symup{\pi}}
    r^2 \sin(\vartheta)
    \, \symup{d}\varphi \, \symup{d}\vartheta \, \symup{d}r
    = \frac{4}{3} \symup{\pi}
  \end{lstlisting}
\end{frame}
